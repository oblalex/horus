<html t:pageTitle="${pageTitle}"
      t:type="layout"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd">
    <div class="content_hd">
        <div class="${messageData.type}">
            ${messageData.pageTitleTail}
        </div>        
    </div>
    <div style="text-align: justify; padding: 10px 30px; text-indent: 40px;">
        <t:outputraw value="messageData.htmlMessage"/>
    </div>
    <div style="text-align: center; padding: 30px 0;">
        
        <t:if test="${messageData.isAutoRedirectNeeded}">
            ${message:auto.redirect.forward.msg}<br/><br/>
            <span id="timerOutput"></span><br/>
            <img src="${context:img/loading_circuit.gif}" style="margin: 10px 0 30px 0;"/><br/>                        
        </t:if>
        
        <t:if test="${messageData.canGoBackward}">
            <a href="javascript:history.go(-1)" class="horus_btn">${message:go.back}</a>        
        </t:if>
        <t:if test="${messageData.canGoForward}">
            <a href="${messageData.nextPageURL}" class="horus_btn" id="forwardLink">${message:continue}</a>
        </t:if>
        
        <t:if test="${messageData.isAutoRedirectNeeded}">
            <script type="text/javascript">                
                function doRedirect(){
                    document.location.href = $('#forwardLink').attr('href');
                }
                
                $('#timerOutput').addAndRunBackwardTimer({
                    seconds : '${messageData.autoRedirectForwardTimeoutSec}',
                    timeUnitsNames : {
                        h:"${message:time.h}",
                        m:"${message:time.min}",
                        s:"${message:time.sec}"},
                    onTimerStop : doRedirect
                });
            </script>
        </t:if>
    </div>
</html>
