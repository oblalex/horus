<html   t:pageTitle="${pageTitle}"
        t:type="layout"
        xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd">

    <style>
        #userWrapper{
            margin: 0 0 5px 0;
            padding: 10px;
            display: inline-table;
            width: 100%;
        }

        #leftSide{
            border-right: 1px solid #BBB;
            width: 110px;
            text-align: center;
            padding: 10px;
        }

        #leftSide a{
            outline: none;
        }

        #contentSide{
            padding: 10px 10px 10px 20px;
        }

        #leftSide, #contentSide{
            display: table-cell;
            vertical-align: top;
        }

        #admin_img{
            background: url("${context:img/roles/admin.png}") no-repeat;
            margin: auto;
            width: 56px;
            height: 56px;
        }

        #admin_img:hover{
            background: url("${context:img/roles/admin_hover.png}") no-repeat;
        }

        #edit{
            outline: none;
        }

        #edit_img{
            background: url("${context:img/controls/crud/edit/24/edit24.png}") no-repeat;
        }

        #edit_img:hover{
            background: url("${context:img/controls/crud/edit/24/edit24_hover.png}") no-repeat;
        }

        #admin_add_img{
            background: url("${context:img/roles/admin_add.png}") no-repeat;
        }

        #admin_add_img:hover{
            background: url("${context:img/roles/admin_add_hover.png}") no-repeat;
        }

        #edit_img, #admin_add_img{
            float: left;
            width: 30px;
            height: 30px;
            margin: 5px auto 0 auto;
        }

        #edit_box{
            margin: 0 auto;
            width: 60px;
        }

        .imgContainer{
            margin-bottom: 15px;
        }

        .field_name{
            font-weight: bold;
        }
        .field_value{
            padding-left: 30px;
            margin-bottom: 7px;
        }
    </style>
    <div class="content_hd">${message:usr.account}</div>    
    <div id="userWrapper">
        <div id="leftSide">
            <div class="imgContainer">
                <t:if test="${avatarUri}">
                    <img src="${avatarUri}" id="avatarImg"/>
                </t:if>
                <t:if test="${!avatarUri}">
                    <img src="${context:img/user.png}" id="avatarImg"/>
                </t:if>
            </div>
            <div style="clear: both;"></div>

            <t:zone t:id="underAvaZone" id="underAvaZone">
                <t:if test="${userAdmin}">
                    <t:pagelink t:page="user/admin/list">
                        <div id="admin_img" title="${userAdmin.comment}"></div>
                    </t:pagelink>
                </t:if>

                <t:if test="${visitorCanEdit}">
                    <div id="edit_box">
                        <t:if test="${!userAdmin}"> 
                            <t:jquery.dialoglink t:dialog="dialogAdminAdd">
                                <div id="admin_add_img" title="${message:admin.list.add}"></div>
                            </t:jquery.dialoglink>
                        </t:if>
                        <t:if test="${userAdmin}">
                            <style>
                                #edit_img{
                                    margin-left: 15px;
                                }
                            </style>
                        </t:if>
                        <t:if test="${visitorIsOwner}">
                            <t:pagelink t:page="user/edit" id="edit">
                                <div id="edit_img" title="${message:usr.account.edit}"></div>
                            </t:pagelink>
                        </t:if>
                        <t:if test="${!visitorIsOwner}">
                            <t:pagelink t:page="user/edit" context="${user.id}" id="edit">
                                <div id="edit_img" title="${message:usr.account.edit}"></div>
                            </t:pagelink>
                        </t:if>  
                    </div>
                </t:if>
                <script type="text/javascript">
                    dialogAdminAddClose();
                </script>
            </t:zone>            
        </div>
        <div id="contentSide">
            <div class="field_name">${message:usr.login}</div>
            <div class="field_value">${user.login}</div>

            <div class="field_name">${message:lang}</div>
            <div class="field_value">${lang}</div>

            <div class="field_name">${message:timezone}</div>
            <div class="field_value">${signedTimeZone}</div>

            <div class="field_name">${message:registration.date}</div>
            <div class="field_value">${registrationDate}</div>

            <t:if test="${!user.emailConfirmed}">
                <div style="color: #900; margin: 20px 0">
                    ${message:usr.account.activated.not}
                </div>
            </t:if>
        </div>
    </div>
    <t:jquery.dialog t:clientId="dialogAdminAdd"
                     style="font-size: 14px; text-shadow: 0 0 0 transparent, 0 1px 0 #FFFFFF;"
                     title="${message:admin.usr.new}">
        <t:form t:id="adminAddForm" t:zone="underAvaZone">
            ${message:comment.about} <b>${user.login}</b>:<br/>
            <t:textarea
                t:value="commentAbout"
                name="areaComment"
                style="width: 100%; font-family: inherit; margin: 7px 0;"/>
            <div style="text-align: center; margin-bottom: -18px;">
                <input type="submit" class="horus_btn" value="${message:add.do}" style="font-size: 11px;"/>
                <a href="javascript:void;" class="a_simple" onClick="dialogAdminAddClose();">
                    <input type="button" class="horus_btn" value="${message:cancel}"/>
                </a>
            </div>
        </t:form>
    </t:jquery.dialog>
    <script type="text/javascript">
        function dialogAdminAddClose(){
            $("#dialogAdminAdd").dialog("close");
        }
    </script>
</html>
