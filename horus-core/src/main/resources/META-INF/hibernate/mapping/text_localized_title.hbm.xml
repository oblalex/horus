<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="ua.cn.stu.oop.horus.core.domain.text.LocalizedTitle" table="text_localized_title">
        <id name="id" type="long">
            <column name="id"/>
            <generator class="sequence">
                <param name="sequence">
                    text_localized_title_seq
                </param>
            </generator>
        </id>
        <property name="locale" not-null="true">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    ua.cn.stu.oop.horus.core.language.AvailableLocale
                </param>
                <param name="type">
                    12
                </param>
            </type>
        </property>
        <property column="grammatical_case" name="grammaticalCase" not-null="true">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    ua.cn.stu.oop.horus.core.language.GrammaticalCase
                </param>
                <param name="type">
                    12
                </param>
            </type>
        </property>
        <property column="grammatical_gender" name="grammaticalGender" not-null="true">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    ua.cn.stu.oop.horus.core.language.GrammaticalGender
                </param>
                <param name="type">
                    12
                </param>
            </type>
        </property>
        <property column="grammatical_number" name="grammaticalNumber" not-null="true">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    ua.cn.stu.oop.horus.core.language.GrammaticalNumber
                </param>
                <param name="type">
                    12
                </param>
            </type>
        </property>
        <property column="part_of_speech" name="partOfSpeech" not-null="true">
            <type name="org.hibernate.type.EnumType">
                <param name="enumClass">
                    ua.cn.stu.oop.horus.core.language.PartOfSpeech
                </param>
                <param name="type">
                    12
                </param>
            </type>
        </property>
        <properties name="uniqueConstraint" unique="true">
            <property column="title" name="title" not-null="true" type="string"/>
            <many-to-one cascade="delete" class="ua.cn.stu.oop.horus.core.domain.text.TitleLink" column="title_link_id" index="localized_title__title_link" name="titleLink" not-null="true"/>
        </properties>
        <property column="is_main_for_locale" name="isMainForLocale" not-null="true" type="true_false"/>
    </class>
    <sql-query name="findWithGrammarByTitleLinkIdNativeSQL">
        <return alias="text_localized_title" class="ua.cn.stu.oop.horus.core.domain.text.LocalizedTitle"/>
        <![CDATA[
            select * from text_localized_title title where                 
                (title.grammatical_case = ?) and
                (title.grammatical_gender = ?) and
                (title.grammatical_number = ?) and
                (title.part_of_speech = ?) and
                (title.title_link_id = ?)
        ]]>
    </sql-query>
    <sql-query name="findWithGrammarByTitleLinkIdAndLocaleNativeSQL">
        <return alias="text_localized_title" class="ua.cn.stu.oop.horus.core.domain.text.LocalizedTitle"/>
        <![CDATA[
            select distinct * from text_localized_title title where                 
                (title.grammatical_case = ?) and
                (title.grammatical_gender = ?) and
                (title.grammatical_number = ?) and
                (title.part_of_speech = ?) and
                (title.title_link_id = ?) and
                (title.locale = ?)
        ]]>
    </sql-query>
    <query name="findMainTitleForLocaleByTitleLinkIdHQL">
        <![CDATA[
            SELECT DISTINCT ltitle FROM LocalizedTitle ltitle
                WHERE ltitle.locale=?
                    AND ltitle.titleLink.id=?
                    AND ltitle.isMainForLocale=true
        ]]>        
    </query>
    <query name="findMainTitlesForLocaleStartingWithStringHQL">
        <![CDATA[
            SELECT ltitle.title FROM LocalizedTitle ltitle
                WHERE (ltitle.locale=?)
                    AND (ltitle.title LIKE ? || '%')
                    AND (ltitle.isMainForLocale=true)
        ]]>        
    </query>
</hibernate-mapping>
