<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>Horus-commander by oblalex</title>

		<link rel="stylesheet" href="style/styles.css">
		<link rel="stylesheet" href="style/pygment_trac.css">

		<script src="js/jquery.min.js"></script>
		<script src="js/scale.fix.js"></script>
		<script src="js/popup.js"></script>
		<script src="js/layout.js"></script>

		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if !IE 7]>
		<style type="text/css">
			#wrap {display:table;height:100%}
		</style>
		<![endif]-->
	</head>
	<body>
		<div id="forLayout"></div>
		<div id="content">
			<h3><a id="contents">Contents</a></h3>
			<ul>
				<li><a href="#about">About</a></li>
				<li><a href="#features">Features</a></li>
				<li><a href="#shell_cmd">Shell commands</a></li>
				<li><a href="#pilot_req">Pilot requests</a></li>
				<li><a href="#installation">Installation</a>
					<ul>
						<li><a href="#install_lin">Linux</a></li>
						<li><a href="#install_win">Windows</a></li>
					</ul>
				</li>
				<li><a href="#launching">Launching</a>
					<ul>
						<li><a href="#launch_lin">Linux</a></li>
						<li><a href="#launch_win">Windows</a></li>
					</ul>
				</li>
				<li><a href="#changing_lang">Changing language</a>
					<ul>
						<li><a href="#lang_lin">Linux</a></li>
						<li><a href="#lang_win">Windows</a></li>
					</ul>
				</li>
				<li><a href="#developer_api">Developer's API</a></li>
			</ul>
			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="about">About</a></h3>
			<p>Horus-commander is a Horus subsystem which communicates with IL-2
			Dedicated Server directly. Loading missions, responding to pilot's
			requests, collecting their statistical data and tracking mission 
			progress are the main purposes of the commander. It extends
			facilities of Dedicated Server.</p>
			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="features">Features</a></h3>
			<ul>
				<li>
					Game Server's process full maintenance: start, stop,
					autorestart. Once you have started commander, it will 
					start server and will try to restart it in case of
					server shuttdown. Exiting commander will also stop
					server.
				</li>
				<li>
					Suppressed server's output: no messy messages, no console logging,
					events logging turned on only for current mission. So, you do not have
					to worry about your disk space.
				</li>
				<li>
					C-language native code for Linux and Windows: run commander without emulations,
					take maximum performance.
				</li>
			</ul>
			<hr/>
			<h3>
				<a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="shell_cmd">Shell commands</a>
				<img src="img/info.png" id="shell-info"/>
			</h3>
			<script>
				$('#shell-info').addPopup($('#shell-info-pop-up'));
			</script>
			<table class="commands" cellspacing="0">
				<col width="300"/>
				<tr>
					<td>chall <span style="color:#070;">&lt;message&gt;</span></td>
					<td>send message to everybody</td>
				</tr>
				<tr>
					<td>chusr <span style="color:#909;">&lt;user&gt;</span>
						<span style="color:#070;">&lt;message&gt;</span></td>
					<td>send message to user</td>
				</tr>
				<tr>
					<td>charm
						<span style="color:#a50;">&lt;army&gt;</span>
						<span style="color:#070;">&lt;message&gt;</span></td>
					<td>send message to army:
						<ul style="margin:0;">
							<li>"none", "n", "0" - army none;</li>
							<li>"red",&nbsp; "r", "1" - army red;</li>
							<li>"blue", "b", "2" - army blue.</li>
						</ul>
					</td>
				</tr>
				<tr>
					<td>exit</td>
					<td>stop server and exit commander</td>
				</tr>
			</table>
			<hr/>
			<h3>
				<a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="pilot_req">Pilot requests</a>
				<img src="img/info.png" id="request-info"/>
			</h3>
			<script>
				$('#request-info').addPopup($('#request-info-pop-up'));
			</script>
			<span style="color:#777; padding-left:70px;">No pilot requests are available yet.</span>
			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="installation">Installation</a></h3>
			<ul>
				<li><a href="#install_lin">Linux</a></li>
				<li><a href="#install_win">Windows</a></li>
			</ul>
			<h3><a id="gotop" href="#installation"><div class="gotop_bg" title="Go top"></div></a><a id="install_lin">Linux</a></h3>
			<p>1. Install next packages:</p>
			<ul style="margin:0; font-size:16px;">
				<li>git (not necessarily)</li>
				<li>gcc (&gt;=4.7.0)</li>
				<li>automake (&gt;=1.11.3)</li>
				<li>m4 (&gt;=1.4.16)</li>
				<li>autoconf (&gt;=2.68)</li>
				<li>libtool (&gt;=2.4.2)</li>
				<li>gettext + gettext-dev (&gt;=0.18.1)</li>
				<li>wine</li>
			</ul>	
			<p>2. Download
				<a href="https://github.com/oblalex/horus/zipball/master">ZIP</a> or
				<a href="https://github.com/oblalex/horus/tarball/master">TAR</a> archive and unpack it
				or clone Horus repository to any directory:</p>
			<pre class="code_snippet">git clone https://github.com/oblalex/horus.git</pre>
			<p>3. Go to horus-commander subdirectory:</p>
			<pre class="code_snippet">cd horus/commander</pre>
			<p>4. Create 'configure'</p>
			<pre class="code_snippet">autoreconf -if</pre>
			<p>5. Create directory for buildings and go into it:</p>
			<pre class="code_snippet">mkdir build && cd build</pre>
			<p>6. Run 'configure':</p>
			<pre class="code_snippet">../configure --prefix=/path/to/your/il-2/server/directory</pre>
			<p>7. Build and install horus-commander:</p>
			<pre class="code_snippet">make && make install-strip</pre>

			<h3><a id="gotop" href="#installation"><div class="gotop_bg" title="Go top"></div></a><a id="install_win">Windows</a></h3>
			<ul>
				<li>Download precompiled <a href="./bin/horus-commander.zip">binaries</a> for 32-bit Windows
					and unpack it to server's directory
				</li>
				<li>or build from sources:</li>
			</ul>
			<p>1. Install <a href="http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/">MinGW</a>:
				select latest version and download binary executable (e.g., <a href="http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/mingw-get-inst-20120426.exe/download">mingw-get-inst-20120426</a>):</p>
				<img class="screensh" src="img/install/wingw_1.png"/></br>
				<img class="screensh" src="img/install/wingw_2.png"/>
			<p>2. Install
				<a href="http://gnuwin32.sourceforge.net/packages/pcre.htm">PCRE</a>
				library to MinGW environment:
				<ol style="margin-left: 50px;">
					<li>Get <a href="http://gnuwin32.sourceforge.net/downlinks/pcre-lib-zip.php">Developer files</a>.</li>
					<li>Copy files from "include" to "C:\MinGW\include" directory.</li>
					<li>Copy files from "lib" to "C:\MinGW\lib" directory.</li>
				</ol>
			</p>
			<p>3. Download
				<a href="https://github.com/oblalex/horus/zipball/master">ZIP</a> or
				<a href="https://github.com/oblalex/horus/tarball/master">TAR</a> archive
				and unpack it to any directory.</p>
			<p>4. Run MinGW shell (find it in the applications menu).</p>
			<p>5. Navigate to directory with Horus Commander sources:</p>
			<pre class="code_snippet">cd /drive_letter/path/to/horus/sources
cd commander</pre>
			<p>6. Make sure "configure.ac" has right format:</p>
			<pre class="code_snippet">dos2unix configure.ac</pre>
			<p>7. Configure, build and install in similar to Linux way:</p>
			<pre class="code_snippet">autoreconf -if
mkdir build && cd build
../configure --prefix=/path/to/your/il-2/server/directory
make && make install-strip</pre>
			<p>8. Copy next libraries from "C:\MinGW\bin" and <a href="http://gnuwin32.sourceforge.net/downlinks/pcre-bin-zip.php">PCRE binaries</a> to your builded "horus-commander" directory: <img src="img/info.png" id="lib-distro-info"/>
				<ul style="margin-left: 50px;">
					<li>libgcc_s_dw2-1.dll</li>
					<li>libiconv-2.dll</li>
					<li>libintl-8.dll</li>
					<li>pcre3.dll</li>
					<li>pthreadGC2.dll</li>
				</ul>
			</p>
			<script>
				$('#lib-distro-info').addPopup($('#lib-distro-info-pop-up'));
			</script>
			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="launching">Launching</a></h3>
			<p>It is recommended to have only one network adapter to be turned on. If you have wired and wireless or
				some phisical and virtual adapters working together then server's IP-address might not be recognized properly.</p>
			<ul>
				<li><a href="#launch_lin">Linux</a></li>
				<li><a href="#launch_win">Windows</a></li>
			</ul>
			<h3><a id="gotop" href="#launching"><div class="gotop_bg" title="Go top"></div></a><a id="launch_lin">Linux</a></h3>
			<p>1. Go to installed horus-commander directory:</p>
			<pre class="code_snippet">cd /path/to/your/il-2/server/directory/horus-commander</pre>
			<p>2. Start commander:</p>
			<pre class="code_snippet">./horusCommander</pre>
			<p>You should see such output:</p>
			<img class="screensh" src="img/exec/starting.png"/>
			<p>Entering shell command 'exit' will cause to this:</p>
			<img class="screensh" src="img/exec/stopping.png"/><br/>
			<h3><a id="gotop" href="#launching"><div class="gotop_bg" title="Go top"></div></a><a id="launch_win">Windows</a></h3>
			<p>Launching on Windows is quite similar to described above. Go to installed horus-commander directory and
				launch "horusCommander.exe". You should see such output:</p>
			<img class="screensh" src="img/exec/starting_win.png"/>

			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="changing_lang">Changing language</a></h3>
			<ul>
				<li><a href="#lang_lin">Linux</a></li>
				<li><a href="#lang_win">Windows</a></li>
			</ul>
			
			<h3><a id="gotop" href="#changing_lang"><div class="gotop_bg" title="Go top"></div></a><a id="lang_lin">Linux</a></h3>
			<p>By default english language is selected. Before launching
			commander you can set LANGUAGE variable to the
			value you need. Remember that commander's output is in UTF-8
			encoding. For switching to russian language run (in bash):</p>
			<pre class="code_snippet">export LANGUAGE="ru_RU"</pre>
			<p>To restore english output:</p>
			<pre class="code_snippet">export LANGUAGE="en_US"</pre>
			
			<h3><a id="gotop" href="#changing_lang"><div class="gotop_bg" title="Go top"></div></a><a id="lang_win">Windows</a></h3>
			<p>Like in linux english language is selected by default. For switching to russian language run (in console):</p>
			<pre class="code_snippet">set LANG=ru_RU</pre>
			<p>Then launch commander from the same console. To restore english output:</p>
			<pre class="code_snippet">set LANG=en_US</pre>

			<hr/>
			<h3><a id="gotop" href="#contents"><div class="gotop_bg" title="Go top"></div></a><a id="developer_api">Developer's API</a></h3>
			<p>You may be also interested in
				<a href="commander/docs/html/files.html">developer's API</a>.
			</p>
		</div>
		<div class="pop-up" id="shell-info-pop-up">
			When commander starts game server a user shell<br/>
			can be used to control commander.
		</div>
		<div class="pop-up" id="request-info-pop-up">
			Commands that pilot can send to server via chat<br/>
			to execute some action or get some information.
		</div>
		<div class="pop-up" id="lib-distro-info-pop-up">
			Auto distribution of libraries is future-planned.
		</div>
		<!--[if !IE]><script>fixScale(document);</script><![endif]-->
	</body>
</html>
